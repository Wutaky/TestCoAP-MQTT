{% extends "layout.html" %}
{% block script %}
<script type="text/javascript" charset="utf-8">
	$(document).ready(function(){
		var socket = io.connect('http://' + document.domain + ':' + location.port + '/socket_test');
		socket.on('echo', function(msg) {
			var message = msg.payload.replace('\n', '<br>');
            $('#output').html(message);
        });
	});
</script>
{% endblock %}

{% block content %}
<div class="row">
	<div class="col-md-3">
		<h4>Protocol:</h4>
		<p>{{ result.protocol }}</p>
	</div>
	<div class="col-md-3">
		<h4>Host:</h4>
		<p>{{ result.host }}</p>
	</div>
	<div class="col-md-3">
		<h4>Port:</h4>
		<p>{{ result.port }}</p>
	</div>
	<div class="col-md-3">
		<h4>Topic:</h4>
		<p>{{ result.topic }}</p>
	</div>
	<div class="col-md-12">
		<h4>Message:</h4>
		<p><div id="output"></div></p>
	</div>
	
</div>
<div class="row">
	<div class="border-row" style="width: 100%; margin-bottom: 30px;"></div>
	<div class="col-md-12">
		<div class="col-md-3 col-md-offset-3"></div>
		<div class="col-md-3 col-md-offset-3">
			<a href="{{ url_for('unsubscribe') }}"><button type="button" class="btn btn-danger">Unsubscribe All</button></a>
		</div>
	</div>
</div>
{% endblock %}